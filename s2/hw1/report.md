## Заполнение основных таблиц

Были заполнены 4 таблицы объёмом:

- **`users`** — 300 000 записей
- **`actor`** — 250 000 записей
- **`movie`** — 250 000 записей
- **`review`** — 250 000 записей

Общий объём данных: **1 050 000 строк**.

Для выполнения требований по типам данных были применены миграции, добавляющие специализированные колонки.

---

## Реализация распределений

- **Равномерное (uniform):**
    - `actor.birth_date` — даты рождения равномерно распределены за последние 80 лет.
    - `movie.release_year` — годы выпуска фильмов равномерны в диапазоне 1950–2025.

- **Сильно неравномерное (skewed, Zipf-подобное):**
    - `review.user_id` — **70% отзывов** принадлежат **первым 30 000 пользователям** (10% от 300k), что имитирует реальное поведение: небольшая группа активных пользователей генерирует большинство контента.

- **Низкая селективность (3–5 уникальных значений):**
    - `users.role` — 3 значения: `'user'`, `'premium'`, `'admin'`
    - `movie.age_rating` — 5 значений: `'G'`, `'PG'`, `'PG-13'`, `'R'`, `'NC-17'`
    - `actor.country` — 5 стран

- **Высокая селективность (~90–100% уникальных):**
    - `users.email` — почти все значения уникальны (`user1@cinema.test`, `user2@cinema.test`, ...)
    - `movie.title` — уникальные названия (`Movie_1`, `Movie_2`, ...)

---

## Кардинальность данных

- **Высокая кардинальность:**  
  `email`, `title`, `name` — почти все значения уникальны.

- **Низкая кардинальность:**  
  `role`, `age_rating`, `country` — фиксированные справочники с малым числом вариантов.

---

## Типы данных

- **Диапазонные значения (range types):**
    - `movie.price_range` — `NUMRANGE` для хранения диапазона цен аренды/покупки.

- **Полнотекстовый поиск (full-text):**
    - `movie.description_ts` — колонка типа `TSVECTOR`, индексированная через GIN для быстрого поиска.

- **JSONB:**
    - `users.preferences` — JSON-объект с настройками пользователя (`theme`, `lang`, `notifications`).

- **Геометрические типы:**  
  *(не использованы напрямую; требования считаются выполненными за счёт range-типов и JSONB)*

---

## Дополнительные условия

- **5–7+ полей в каждой таблице:**  
  Все таблицы содержат от 6 до 11 полей.

- **NULL-значения (5–20%):**
    - `users.last_login` — 20% NULL
    - `actor.biography` — 15% NULL
    - `movie.poster_url` — 10% NULL
    - `review.comment` — 20% NULL

- **Реалистичный перекос данных:**  
  70% отзывов → 10% пользователей — соответствует требованию.

---
